(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{409:function(t,s,a){"use strict";a.r(s);var n=a(56),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"vue-routerä¹‹å¯¼èˆªå®ˆå«-navigation-guards"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#vue-routerä¹‹å¯¼èˆªå®ˆå«-navigation-guards"}},[t._v("#")]),t._v(" vue-routerä¹‹å¯¼èˆªå®ˆå«ï¼ˆNavigation Guards)")]),t._v(" "),a("h2",{attrs:{id:"å®ˆå«åˆ†ç±»-3ç±»"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å®ˆå«åˆ†ç±»-3ç±»"}},[t._v("#")]),t._v(" å®ˆå«åˆ†ç±»ï¼ˆ3ç±»)")]),t._v(" "),a("ol",[a("li",[t._v("å…¨å±€å®ˆå«ï¼šåœ¨è·¯ç”±é…ç½®ä¸Šå®šä¹‰")]),t._v(" "),a("li",[t._v("è·¯ç”±ç‹¬äº«å®ˆå«ï¼šåœ¨è·¯ç”±é…ç½®ä¸Šå®šä¹‰")]),t._v(" "),a("li",[t._v("ç»„ä»¶å†…å®ˆå«ï¼šåœ¨ç»„ä»¶å†…éƒ¨å®šä¹‰")])]),t._v(" "),a("h2",{attrs:{id:"å…¨å±€å®ˆå«"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å…¨å±€å®ˆå«"}},[t._v("#")]),t._v(" å…¨å±€å®ˆå«")]),t._v(" "),a("p",[t._v("å¿«é€Ÿè®°å¿†ï¼š2ä¸ªå«å£«æŒæœ‰1æŠŠé’©å­ğŸª")]),t._v(" "),a("ol",[a("li",[a("strong",[t._v("beforeEach(to,from,next): å…¨å±€å‰ç½®å®ˆå«")]),a("br"),t._v("\ntoè¡¨ç¤ºå¾€å“ªé‡Œå»"),a("br"),t._v("\nfromè¡¨ç¤ºå½“å‰è¦ç¦»å¼€åœ¨çš„è·¯ç”±"),a("br"),t._v("\nnext()æ§åˆ¶æ”¾ä¸æ”¾è¡Œï¼Ÿï¼Œå¾€å“ªé‡Œæ”¾è¡Œï¼Ÿ"),a("br"),t._v("\nnextæœ‰4ç§æ–¹æ³•ï¼š\n"),a("ul",[a("li",[t._v("next() æ­¤å®ˆå«æ”¾è¡Œï¼Œä½†æ˜¯èƒ½ä¸èƒ½å»å¾€å…¶ä»–è·¯ç”±ï¼Œè¿˜è¦çœ‹åˆ«çš„å®ˆå«æ˜¯å¦ä¹Ÿæ”¾è¡Œã€‚")]),t._v(" "),a("li",[t._v("next(fasle) æ­¤å®ˆå«ä¸æ”¾è¡Œï¼Œå³ä¸­æ–­å½“å‰å¯¼èˆªï¼Œå³ä½¿ç”¨æˆ·æ‰‹åŠ¨ç‚¹å‡»åé€€æŒ‰é’®ä¹Ÿä¼šé‡ç½®åˆ°å½“å‰æ‰€åœ¨çš„è·¯ç”±ã€‚")]),t._v(" "),a("li",[t._v("next('home') å¯ä»¥è‡ªå·±å¾€()ä¸­ä¼ é€’è·¯ç”±ï¼Œä¹Ÿå°±æ˜¯å¯ä»¥å†³å®šå®ˆå«å¾€å“ªé‡Œçš„è·¯ç”±æ”¾è¡Œã€‚")]),t._v(" "),a("li",[t._v("next(error) å¾€nextä¸­ä¼ é€’ä¸€ä¸ªErrorå®ä¾‹ï¼Œæ­¤å®ˆå«ä¸æ”¾è¡Œï¼Œä¸”errorä¼šè¢«ä¼ é€’ç»™router.onError()")])])])]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" router "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("VueRouter")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    router"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("beforeEach")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("to"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" from"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" next")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("   \n")])])]),a("p",[t._v("æ³¨ï¼šnext()åªèƒ½è¢«ä¸¥æ ¼è°ƒç”¨ä¸€æ¬¡ï¼Œé™¤éåœ¨if , elseç­‰é€»è¾‘è·¯å¾„ä¸é‡å çš„æƒ…å†µä¸‹èƒ½è¢«è°ƒç”¨å¤šæ¬¡")]),t._v(" "),a("ol",{attrs:{start:"2"}},[a("li",[a("p",[a("strong",[t._v("beforeResolve(to,from,next): å…¨å±€è§£æå®ˆå«")]),a("br"),t._v("\nç”¨å¤„ï¼šåœ¨ beforeRouteEnter è°ƒç”¨ä¹‹åï¼Œå¯¼èˆªè¢«ç¡®è®¤ä¹‹å‰ï¼ŒåŒæ—¶åœ¨æ‰€æœ‰ç»„ä»¶å†…å®ˆå«å’Œå¼‚æ­¥è·¯ç”±ç»„ä»¶è¢«è§£æä¹‹åè°ƒç”¨")])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("afterEach(to,from): å…¨å±€åç½®é’©å­")]),a("br"),t._v("\nå·²ç»è¿›å…¥ç›®æ ‡è·¯ç”±äº†ï¼Œæ‰€ä»¥æ²¡æœ‰nextï¼ˆï¼‰å‚æ•°"),a("br"),t._v("\nç”¨å¤„ï¼šç±»ä¼¼äºæ§åˆ¶è·³è½¬åæ»šåŠ¨æ¡å›åˆ°é¡¶éƒ¨")])])]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("router"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("afterEach")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("to"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("  \n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è·³è½¬ä¹‹åæ»šåŠ¨æ¡å›åˆ°é¡¶éƒ¨  ")]),t._v("\n    window"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("scrollTo")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("h2",{attrs:{id:"è·¯ç”±ç‹¬äº«å®ˆå«"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#è·¯ç”±ç‹¬äº«å®ˆå«"}},[t._v("#")]),t._v(" è·¯ç”±ç‹¬äº«å®ˆå«")]),t._v(" "),a("ol",[a("li",[t._v("beforeEnter(to,from,next): å’ŒbeforeEachä¸€æ ·æ¥å—3ä¸ªå‚æ•°ï¼Œç›´æ¥åœ¨è·¯ç”±é…ç½®å¤„å®šä¹‰")])]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" router "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("VueRouter")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("routes")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("path")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/foo'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("component")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Foo"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("beforeEnter")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("to"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" from"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" next")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("h2",{attrs:{id:"ç»„ä»¶å†…å®ˆå«-3ä¸ª"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ç»„ä»¶å†…å®ˆå«-3ä¸ª"}},[t._v("#")]),t._v(" ç»„ä»¶å†…å®ˆå«ï¼ˆ3ä¸ªï¼‰")]),t._v(" "),a("p",[t._v("å‡æ¥å—3ä¸ªå‚æ•°(to, from, next)")]),t._v(" "),a("ol",[a("li",[a("strong",[t._v("beforeRouteEnter(to, from, next)")]),t._v(" "),a("ul",[a("li",[t._v("æ— æ³•è·å–thisï¼Œå› ä¸ºæ­¤æ—¶ç»„ä»¶è¿˜æ²¡æœ‰è¢«åˆ›ç«‹ï¼Œä½†æ˜¯å¯ä»¥é€šè¿‡å¾€nextä¼ å…¥å›è°ƒçš„æ–¹å¼æ¥è®¿é—®thisã€‚beforeRouteEnteræ˜¯å”¯ä¸€ä¸€ä¸ªå¯ä»¥å¾€nexté‡Œé¢ä¼ å…¥å›è°ƒçš„å®ˆå«ã€‚")]),t._v(" "),a("li",[t._v("åœ¨æ¸²æŸ“è¯¥ç»„ä»¶çš„å¯¹åº”è·¯ç”±è¢«confirmå‰è°ƒç”¨ã€‚")])])]),t._v(" "),a("li",[a("strong",[t._v("beforeRouteUpdate(to, from, next)")]),t._v(" "),a("ul",[a("li",[t._v("èƒ½è·å–this")]),t._v(" "),a("li",[t._v("å¯¹äºä¸€ä¸ªå¸¦æœ‰åŠ¨æ€å‚æ•°çš„è·¯å¾„ /foo/:idï¼Œåœ¨ /foo/1 å’Œ /foo/2 ä¹‹é—´è·³è½¬çš„æ—¶å€™ï¼Œç”±äºä¼šæ¸²æŸ“åŒæ ·çš„ Foo ç»„ä»¶ï¼Œå› æ­¤ç»„ä»¶å®ä¾‹ä¼šè¢«å¤ç”¨ã€‚è€Œè¿™ä¸ªé’©å­å°±ä¼šåœ¨è¿™ä¸ªæƒ…å†µä¸‹è¢«è°ƒç”¨ã€‚å³Fooç»„ä»¶è¢«å¤ç”¨æ—¶ï¼Œè°ƒç”¨beforeRouteUpdate")]),t._v(" "),a("li",[t._v("æ­¤é’©å­è°ƒç”¨åæ‰è°ƒç”¨beforeResolveå…¨å±€è§£æå®ˆå«ï¼Œå› ä¸ºåœ¨æ­¤ä¹‹å‰beforeRouteEnterç»„ä»¶è¿˜æ²¡æœ‰è¢«åˆ›å»ºï¼Œè€ŒbeforeResolveéœ€è¦ç»„ä»¶è¢«è§£æä¹‹åæ‰èƒ½è°ƒç”¨ã€‚")])])]),t._v(" "),a("li",[a("strong",[t._v("beforeRouteLeave")]),t._v(" "),a("ul",[a("li",[t._v("å¯ä»¥è·å–thisï¼Œç¦»å¼€ç»„ä»¶æ—¶å€™å¯¹åº”è·¯ç”±æ—¶å€™ä½¿ç”¨ã€‚")]),t._v(" "),a("li",[t._v("ç”¨é€”ï¼šé€šå¸¸ç”¨æ¥ç¦æ­¢ç”¨æˆ·åœ¨è¿˜æœªä¿å­˜ä¿®æ”¹å‰çªç„¶ç¦»å¼€")])]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("beforeRouteLeave")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("to"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" from"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" next")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" answer "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" window"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("confirm")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'æ‚¨çš„æ•°æ®è¿˜æœªä¿å­˜ï¼'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("answer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("next")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("next")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])])]),t._v(" "),a("h2",{attrs:{id:"å®Œæ•´å¯¼èˆªè§£ææµç¨‹"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å®Œæ•´å¯¼èˆªè§£ææµç¨‹"}},[t._v("#")]),t._v(" å®Œæ•´å¯¼èˆªè§£ææµç¨‹")]),t._v(" "),a("ol",[a("li",[t._v("å¯¼èˆªè¢«è§¦å‘ã€‚")]),t._v(" "),a("li",[t._v("åœ¨å¤±æ´»çš„ç»„ä»¶é‡Œè°ƒç”¨ beforeRouteLeave å®ˆå«ã€‚")]),t._v(" "),a("li",[t._v("è°ƒç”¨å…¨å±€çš„ beforeEach å®ˆå«ã€‚")]),t._v(" "),a("li",[t._v("åœ¨é‡ç”¨çš„ç»„ä»¶é‡Œè°ƒç”¨ beforeRouteUpdate å®ˆå«ã€‚")]),t._v(" "),a("li",[t._v("åœ¨è·¯ç”±é…ç½®é‡Œè°ƒç”¨ beforeEnterã€‚")]),t._v(" "),a("li",[t._v("è§£æå¼‚æ­¥è·¯ç”±ç»„ä»¶ã€‚")]),t._v(" "),a("li",[t._v("åœ¨è¢«æ¿€æ´»çš„ç»„ä»¶é‡Œè°ƒç”¨ beforeRouteEnterã€‚")]),t._v(" "),a("li",[t._v("è°ƒç”¨å…¨å±€çš„ beforeResolve å®ˆå« (2.5+)ã€‚")]),t._v(" "),a("li",[t._v("å¯¼èˆªè¢«ç¡®è®¤ã€‚")]),t._v(" "),a("li",[t._v("è°ƒç”¨å…¨å±€çš„ afterEach é’©å­ã€‚")]),t._v(" "),a("li",[t._v("è§¦å‘ DOM æ›´æ–°ã€‚")]),t._v(" "),a("li",[t._v("è°ƒç”¨ beforeRouteEnter å®ˆå«ä¸­ä¼ ç»™ next çš„å›è°ƒå‡½æ•°ï¼Œåˆ›å»ºå¥½çš„ç»„ä»¶å®ä¾‹ä¼šä½œä¸ºå›è°ƒå‡½æ•°çš„å‚æ•°ä¼ å…¥ã€‚")])]),t._v(" "),a("p",[a("strong",[t._v("å®˜æ–¹æ–‡æ¡£é“¾æ¥ï¼š"),a("a",{attrs:{href:"https://router.vuejs.org/zh/guide/advanced/navigation-guards.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://router.vuejs.org/zh/guide/advanced/navigation-guards.html"),a("OutboundLink")],1)])])])}),[],!1,null,null,null);s.default=e.exports}}]);